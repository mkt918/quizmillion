<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Millionaire Quiz</title>
    <link rel="stylesheet" href="style.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Noto+Sans+JP:wght@400;700&display=swap"
        rel="stylesheet">
</head>

<body>
    <div class="app-container">
        <!-- Start Screen -->
        <div id="start-screen" class="screen active">
            <h1 class="game-title">MILLIONAIRE<br>QUIZ</h1>
            <button id="start-btn" class="millionaire-btn">START</button>
            <button id="review-menu-btn" class="millionaire-btn secondary">復習モード</button>
            <button id="history-menu-btn" class="millionaire-btn secondary">履歴を見る</button>
            <button id="shop-menu-btn" class="millionaire-btn secondary">ショップ (テーマ変更)</button>
        </div>

        <!-- Review Selection Screen -->
        <div id="review-selection-screen" class="screen">
            <h2>復習する問題を選んでください</h2>
            <div id="review-list" class="item-list">
                <!-- Loaded via JS -->
            </div>
            <button id="review-back-btn" class="millionaire-btn secondary">戻る</button>
        </div>

        <!-- Unit Selection Screen -->
        <div id="unit-selection-screen" class="screen">
            <h2>出題する単元を選んでください</h2>
            <div id="unit-selection-list" class="unit-grid">
                <!-- Loaded via JS -->
            </div>
            <div id="total-selected-questions" class="count-display">選択された問題数: 0問</div>
            <div id="unit-error" class="error-message hidden">単元を一つ以上選択してください。</div>
            <div class="selection-controls">
                <button id="select-all-units-btn" class="millionaire-btn secondary small">すべて選択</button>
                <button id="confirm-units-btn" class="millionaire-btn">開始</button>
                <button id="unit-selection-back-btn" class="millionaire-btn secondary small">戻る</button>
            </div>
        </div>

        <!-- History Screen -->
        <div id="history-screen" class="screen">
            <h2>過去のリザルト</h2>
            <div id="history-list" class="card-list">
                <!-- Loaded via JS -->
            </div>
            <button id="history-back-btn" class="millionaire-btn secondary">戻る</button>
        </div>

        <!-- Quiz Screen -->
        <div id="quiz-screen" class="screen">
            <div class="top-bar">
                <div class="question-number">Q. <span id="q-num">1</span></div>
                <button id="toggle-score-btn" class="millionaire-btn mini">賞金一覧</button>
                <div class="score">賞金: <span id="score-val">0</span>円</div>
            </div>

            <div class="quiz-main-layout">
                <div id="score-table" class="score-table">
                    <!-- Loaded via JS -->
                </div>

                <div class="quiz-content-area">
                    <div id="unit-display" class="unit-tag"></div>
                    <div class="lifelines">
                        <button id="lifeline-5050" class="lifeline-btn" title="50:50">50:50</button>
                        <button id="lifeline-phone" class="lifeline-btn" title="Phone">📞</button>
                        <button id="lifeline-audience" class="lifeline-btn" title="Audience">👥</button>
                    </div>

                    <div class="question-area">
                        <div id="image-container" class="image-container hidden">
                            <img id="question-image" src="" alt="Question Image">
                        </div>
                        <div class="question-box">
                            <p id="question-text">ここに問題文が表示されます。</p>
                        </div>
                    </div>

                    <div class="options-grid">
                        <button class="option-btn" data-index="0"><span class="option-label">A:</span> <span
                                class="option-text">Option A</span></button>
                        <button class="option-btn" data-index="1"><span class="option-label">B:</span> <span
                                class="option-text">Option B</span></button>
                        <button class="option-btn" data-index="2"><span class="option-label">C:</span> <span
                                class="option-text">Option C</span></button>
                        <button class="option-btn" data-index="3"><span class="option-label">D:</span> <span
                                class="option-text">Option D</span></button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Result Screen -->
        <div id="result-screen" class="screen">
            <h2 id="result-header">GAME OVER</h2>
            <div class="final-score">獲得賞金: <span id="final-score-val">0</span>円</div>
            <p id="result-message"></p>
            <div id="result-mistakes-area" class="mistakes-log hidden">
                <h3>間違えた問題:</h3>
                <ul id="result-mistakes-list"></ul>
            </div>
            <button id="retry-btn" class="millionaire-btn">TRY AGAIN</button>
            <button id="home-btn" class="millionaire-btn secondary">HOME</button>
        </div>

        <!-- Feedback Overlay -->
        <div id="feedback-overlay" class="feedback-overlay hidden">
            <div class="feedback-content">
                <h2 id="feedback-title">CORRECT</h2>
                <p id="feedback-explanation"></p>
                <p id="feedback-next-prize" class="next-prize-info"></p>
                <button id="next-question-btn" class="millionaire-btn">NEXT</button>
            </div>
        </div>

        <!-- Audience Graph Modal -->
        <div id="audience-modal" class="modal hidden">
            <div class="modal-content">
                <h3>オーディエンスの回答</h3>
                <p class="modal-desc">会場の100人にアンケートをとりました</p>
                <div class="graph-container">
                    <div class="bar-group">
                        <span id="percent-a" class="percent-text">0%</span>
                        <div class="bar" id="bar-a" style="height: 0%"></div>
                        <span class="bar-label">A</span>
                    </div>
                    <div class="bar-group">
                        <span id="percent-b" class="percent-text">0%</span>
                        <div class="bar" id="bar-b" style="height: 0%"></div>
                        <span class="bar-label">B</span>
                    </div>
                    <div class="bar-group">
                        <span id="percent-c" class="percent-text">0%</span>
                        <div class="bar" id="bar-c" style="height: 0%"></div>
                        <span class="bar-label">C</span>
                    </div>
                    <div class="bar-group">
                        <span id="percent-d" class="percent-text">0%</span>
                        <div class="bar" id="bar-d" style="height: 0%"></div>
                        <span class="bar-label">D</span>
                    </div>
                </div>
                <button id="close-audience" class="millionaire-btn small">閉じる</button>
            </div>
        </div>
        <!-- Shop Screen -->
        <div id="theme-shop-screen" class="screen">
            <div class="shop-header">
                <h2>THEME SHOP</h2>
                <div class="total-prize-display">所持金: <span id="shop-total-prize-display">$0</span></div>
            </div>
            <div id="shop-items-container" class="item-grid">
                <!-- Loaded via JS -->
            </div>
            <button id="shop-close-btn" class="millionaire-btn secondary">戻る</button>
        </div>
    </div> <!-- app-container end -->

    <!-- Audio Elements -->
    <audio id="bgm-main" loop src="assets/audio/bgm_main.mp3"></audio>

    <script src="js/managers/StorageManager.js"></script>
    <script src="js/managers/AudioManager.js"></script>
    <script src="js/managers/LifelineManager.js"></script>
    <script src="script.js"></script>
</body>

</html>